define("config",function(a,b,c){var d={MARKING_LOGIN:"http://192.168.1.52:8080/ctb-portlet/restful/markingLogin/",MARKING_NAME:"http://192.168.1.52:8080/ctb-portlet/restful/markingName/",MARKING_ORDER_NO:"http://192.168.1.52:8080/ctb-portlet/restful/markingOrderNo/",MARKING_IMG:"http://192.168.1.52:8080/ctb-portlet/restful/markingImg/",MARKING_SAVE:"http://192.168.1.52:8080/ctb-portlet/restful/markingSave/",IMG_PREFIX:"http://192.168.1.52:8080/ctb-portlet/files/examination/"};c.exports=d}),define(function(a){var b=a("unit/loading"),c=a("unit/viewport");c.show(localStorage.lastPanel||"#login"),b.hide()}),define(function(a){var b=a("../config"),c=a("../unit/dom"),d=a("../unit/ajax"),e=a("../unit/store"),f=a("../unit/viewport");d({url:b.MARKING_NAME,type:"post",data:{pdata:{teacherId:e("teacherId")}},success:function(a){function g(a){var c=a.target;"BUTTON"===c.nodeName&&(e("markingType",c.getAttribute("data-markingType")),e("examId",c.getAttribute("data-examId")),d({url:b.MARKING_ORDER_NO,type:"post",data:{pdata:{markingType:e("markingType"),examId:e("examId"),teacherId:e("teacherId")}},success:function(a){e("allOrderNos",a),f.show("#orderList")}}))}a=a||{};var h=c.find("#examListTpl")[0].innerHTML,i=Handlebars.compile(h),j=i(a);c.find("#examList")[0].innerHTML=j,c.find("#examList")[0].addEventListener("touchstart",g,!1)}})}),define(function(a){var b=a("../config"),c=a("../unit/dom"),d=a("../unit/ajax"),e=a("../unit/viewport"),f=a("../unit/tips"),g=a("../unit/store"),h=c.find("#login form")[0];h.addEventListener("submit",function(a){function h(){for(var a,b,d={},e=c.find('input[type="text"], input[type="password"]'),f=0,g=e.length;g>f;++f)a=e[f].getAttribute("name")||"",b=e[f].value||"",d[a]=b;return d}a.preventDefault(),d({url:b.MARKING_LOGIN,type:"post",data:{pdata:h()},success:function(a){a=a||{},"0"===a.status?(g("teacherId",a.teacherId),e.show("#examList")):f.show({msg:"登录失败"}),g("exames",a)}})},!1)}),define(function(a){function b(a){var b=a.target||{};console.log(a),"LI"===b.nodeName&&e({url:c.MARKING_IMG,type:"post",data:{pdata:{markingType:f("markingType"),examId:f("examId"),teacherId:f("teacherId"),orderNo:b.getAttribute("data-orderNo")}},success:function(a){f("viewExam",a),g.show("#viewExam")}})}var c=a("../config"),d=a("../unit/dom"),e=a("../unit/ajax"),f=a("../unit/store"),g=a("../unit/viewport"),h=f("allOrderNos")||{},i=d.find("#orderListTpl")[0].innerHTML,j=Handlebars.compile(i),k=j(h);d.find("#orderList")[0].innerHTML=k,d.find("#orderList")[0].addEventListener("touchstart",b,!1)}),define(function(a){function b(a){if(a.finishType!==!1)return alert("题目已判完！"),void 0;d=+new Date,a.imgPrefix=e.IMG_PREFIX,a.marking.imgSrc=a.marking.imgSrc+"?t="+ +new Date,a={viewExam:a};var b=f.find("#viewExamTpl")[0].innerHTML,c=Handlebars.compile(b),g=c(a);f.find("#viewExam")[0].innerHTML=g}function c(a){var c=a.target||{};console.log(a),"save"===c.id&&g({url:e.MARKING_SAVE,type:"post",data:{pdata:{studentDetailId:h("viewExam").marking.studentDetailId,teacherId:h("exames").teacherId,score:1,evaluation:999999999,markingType:h("markingType"),hour:0|(+new Date-d)/1e3}},success:function(a){h("viewExam",a),b(a)}})}var d,e=a("../config"),f=a("../unit/dom"),g=a("../unit/ajax"),h=a("../unit/store");b(h("viewExam")||{}),f.find("#viewExam")[0].addEventListener("touchstart",c,!1)}),define(function(a){function b(b){e.show();var i,j,k=d("ticketId")||"",l={url:"",type:"",success:function(){},failure:function(){var b=a("./viewport");f.show({msg:"您没有权限",callback:function(){b.show("#login")}})}};c.extend(l,b),i=l.type.toUpperCase(),/GET|DELETE/.test(i)&&(j=JSON.stringify(l.data).replace(/^\{|\}$/g,"").replace(/"/g,"").replace(/:/g,"=").replace(/,/g,"&"),h.open(i,l.url+(l.url.indexOf("?")>-1?"&":"?")+j+"&__t="+ +new Date,!0),h.setRequestHeader("ticketId",d("ticketId")||""),h.send(null)),/POST|PUT/.test(i)&&(h.open(i,l.url,!0),h.setRequestHeader("ticketId",d("ticketId")||""),h.send(JSON.stringify(l.data))),h.onreadystatechange=function(){var a;4===h.readyState&&(200===h.status?(k=h.getResponseHeader("ticketId"),k&&d("ticketId",k),a=JSON.parse(h.responseText||"{}"),l.success(a)):401===h.status?f.show({msg:"用户未登录",callback:function(){g.show("#login")}}):400===h.status&&l.failure(a),e.hide())}}var c=a("./unit"),d=a("./store"),e=a("./loading"),f=a("./tips"),g=a("./viewport"),h=new XMLHttpRequest;return window.ajax=b,b}),define(function(){return{find:function(a){return document.querySelectorAll(a)}}}),define(function(a){var b=a("./dom"),c=a("./mask"),d=function(){var a=b.find(".plg-loading")[0]||document.createElement("div");return a.setAttribute("class","plg-loading"),a.innerHTML="加载。。。",document.body.appendChild(a),d?d:a}();return{show:function(){c.show(),d.style.display="block"},hide:function(){c.hide(),d.style.display="none"}}}),define(function(a){var b=a("./dom"),c=function(){var a=b.find(".plg-mask")[0]||document.createElement("div");return a.setAttribute("class","plg-mask"),document.body.appendChild(a),c?c:a}();return{show:function(){c.style.display="block"},hide:function(){c.style.display="none"}}}),define(function(){function a(a,c){if(1===arguments.length)return JSON.parse(localStorage[b])[a];var d=JSON.parse(localStorage[b]);d[a]=c,localStorage[b]=JSON.stringify(d)}var b="markingData";return localStorage[b]=localStorage[b]||"{}",a}),define(function(a){var b=a("./dom"),c=function(){var a=b.find(".plg-tips")[0]||document.createElement("div");return a.setAttribute("class","plg-tips"),document.body.appendChild(a),c?c:a}();return{show:function(a){a=a||{};var b=this;return c.style.display="block",c.innerHTML=a.msg,setTimeout(function(){b.hide(),a.callback&&a.callback()},1e3),b},hide:function(){return c.style.display="none",this}}}),define(function(){return{extend:function(a,b,c){function d(a,b,c){for(var e in c)b[e]=c[e];a&&c[e]&&d(a,b[e],c[e])}"boolean"!=typeof a&&(c=b,b=a,a=null),d(a,b,c)}}}),define(function(a,b,c){var d=a("./dom"),e=d.find(".-viewport"),f={show:function(a,b){var c=d.find(a)[0];if("visible"!==c.style.visibility){for(var f=0,g=e.length;g>f;++f)e[f].style.visibility="hidden";c.style.visibility="visible",seajs.use("page/"+a.slice(1)),localStorage.lastPanel!==a&&(localStorage.lastPanel=a),b&&b()}}};c.exports=f});